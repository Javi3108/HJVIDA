<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <style>
        @page { size: A4; margin: 1.5cm; }
        body { font-family: 'Helvetica', Arial, sans-serif; color: #333; line-height: 1.4; font-size: 10pt; margin: 0; }
        
        /* Encabezado */
        .header { border-bottom: 3px solid #1e40af; padding-bottom: 15px; margin-bottom: 20px; }
        .foto { float: right; width: 110px; height: 140px; border: 1px solid #ddd; object-fit: cover; }
        .nombre { font-size: 24pt; color: #1e40af; margin: 0; text-transform: uppercase; font-weight: bold; }

        /* Secciones */
        .seccion-titulo { 
            background: #f1f5f9; color: #1e40af; padding: 6px 12px; font-weight: bold; 
            border-left: 6px solid #1e40af; margin-top: 20px; text-transform: uppercase;
        }

        /* Tablas */
        .tabla-datos { width: 100%; border-collapse: collapse; margin-top: 8px; }
        .tabla-datos td { padding: 4px 8px; border-bottom: 1px solid #eee; }
        .label { font-weight: bold; width: 180px; color: #475569; }

        /* Items de Listas */
        .bloque-item { margin-top: 10px; padding-bottom: 8px; border-bottom: 1px solid #f0f0f0; }
        .item-titulo { font-weight: bold; font-size: 11pt; color: #111; }
        .item-sub { color: #1e40af; font-weight: bold; }
        .item-fecha { color: #666; font-style: italic; font-size: 9pt; }
    </style>
</head>
<body>

    <div class="header">
        {% if perfil.foto %}
            <img src="{{ perfil.foto.path }}" class="foto">
        {% endif %}
        <h1 class="nombre">{{ perfil.nombres }} {{ perfil.apellidos }}</h1>
        <div style="font-size: 14pt; color: #64748b;">Curriculum Vitae Profesional</div>
    </div>

    <div class="seccion-titulo">Datos Personales</div>
    <table class="tabla-datos">
        <tr><td class="label">Cédula / ID:</td><td>{{ perfil.cedula }}</td></tr>
        <tr><td class="label">Nacionalidad:</td><td>{{ perfil.nacionalidad }}</td></tr>
        <tr><td class="label">Estado Civil:</td><td>{{ perfil.estado_civil }}</td></tr>
        <tr><td class="label">Fecha de Nacimiento:</td><td>{{ perfil.fecha_nacimiento|date:"d/m/Y" }}</td></tr>
        <tr><td class="label">Teléfono:</td><td>{{ perfil.telefono }}</td></tr>
        <tr><td class="label">Email:</td><td>{{ perfil.email }}</td></tr>
        {% if perfil.direccion %}
        <tr><td class="label">Dirección:</td><td>{{ perfil.direccion }}</td></tr>
        {% endif %}
    </table>

    {% if experiencias %}
    <div class="seccion-titulo">Trayectoria Profesional</div>
    {% for exp in experiencias %}
        <div class="bloque-item">
            <div class="item-titulo">{{ exp.cargo }}</div>
            <div class="item-sub">{{ exp.empresa }}</div>
            <div class="item-fecha">{{ exp.fecha_inicio|date:"M Y" }} — {% if exp.fecha_fin %}{{ exp.fecha_fin|date:"M Y" }}{% else %}Actualidad{% endif %}</div>
            <div style="margin-top:4px;">{{ exp.descripcion|linebreaksbr }}</div>
        </div>
    {% endfor %}
    {% endif %}

    {% if estudios %}
    <div class="seccion-titulo">Formación Académica</div>
    {% for est in estudios %}
        <div class="bloque-item">
            <div class="item-titulo">{{ est.titulo }}</div>
            <div class="item-sub">{{ est.institucion }}</div>
            <div class="item-fecha">{{ est.fecha_inicio|date:"Y" }} — {{ est.fecha_fin|date:"Y" }}</div>
        </div>
    {% endfor %}
    {% endif %}

    {% if cursos %}
    <div class="seccion-titulo">Cursos y Certificaciones</div>
    {% for c in cursos %}
        <div class="bloque-item">
            <div class="item-titulo">{{ c.nombre_curso }}</div>
            <div class="item-sub">{{ c.institucion }}</div>
            <div class="item-fecha">{{ c.fecha_realizacion|date:"d/m/Y" }} | Duración: {{ c.horas }} horas</div>
        </div>
    {% endfor %}
    {% endif %}

    {% if logros %}
    <div class="seccion-titulo">Reconocimientos y Premios</div>
    {% for r in logros %}
        <div class="bloque-item">
            <div class="item-titulo">{{ r.nombre }}</div>
            <div class="item-sub">{{ r.institucion }}</div>
            <div class="item-fecha">Obtenido en: {{ r.fecha_obtencion|date:"d/m/Y" }}</div>
        </div>
    {% endfor %}
    {% endif %}

    {% if proyectos %}
    <div class="seccion-titulo">Producción Intelectual / Proyectos</div>
    {% for p in proyectos %}
        <div class="bloque-item">
            <div class="item-titulo">{{ p.nombre }}</div>
            <div class="item-fecha">Publicado: {{ p.fecha_publicacion|date:"d/m/Y" }}</div>
            <div style="margin-top:4px;">{{ p.descripcion }}</div>
            {% if p.registro_id %}<div style="font-size: 8pt; color: #666;">ID Registro: {{ p.registro_id }}</div>{% endif %}
        </div>
    {% endfor %}
    {% endif %}

</body>
</html>